"use strict";synthMobile.config(["$routeProvider",function(e){e.when("/tool/resources",{templateUrl:"tools/resources/partials/resources.html"})}]).directive("resourceImg",["ResourcesService",function(e){return{restrict:"E",templateUrl:"tools/resources/partials/resourceImg.html",scope:{},link:function(o,n,r){o.src=r.src,o.width=r.width,o.height=r.height,o.initialising=!0;var t={};e.getItem(r.resourceId).then(function(e){o.resource=t=e,o.initialising=!1}),o.download=function(){t.busyDownloading||(t.busyDownloading=!0,e.downloadResource(t).then(function(){t.busyDownloading=!1,t.isDownloaded=!0},function(e){t.busyDownloading=!1,console.log(e)},function(e){e instanceof ProgressEvent&&(t.downloadProgress=e.lengthComputable?e.loaded/e.total*100:e.loaded/t.size*100)}))}}}}]),SynthAttachmentMiner.addHandler("resources-removed",function(e,o){var n=[];for(var r in e){var t=e[r];if(0==t.directory&&null!=t.downloadKey){var i=t.treeId;i=i.replace(/[|&:;$%@"<>()+,]/g,"_"),i=encodeURI(o+i),n.push({downloadKey:t.downloadKey,downloadPath:i})}}return n});