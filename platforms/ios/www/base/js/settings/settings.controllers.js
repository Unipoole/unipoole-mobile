"use strict";synthMobile.controller("SettingsCtrl",["$scope","$rootScope","$window","LoggerService","DataService","AppSyncStatus","SynthErrorHandler","UserSession","SyncService",function(t,n,e,o,a,c,l,s,u){o("SettingsCtrl");n.activePage="settings",n.breadcrumbs=[{name:"Settings"}],t.deleteApplicationData=function(){a.deleteAllApplicationData().then(function(){u.stopBackgroundSync(),c.allOutSync(),n.tools=null,s.clearSession(),e.location="#/boot"},l)},t.animateSwitch=!1,t.autoSyncDownload=s.settings&&s.settings.autoSyncDownload,t.autoSyncUpload=s.settings&&s.settings.autoSyncUpload,t.animateSwitch=!0,t.modules=s.modules,t.defaultModule=s.defaultModule,t.numModules=null==s.modules?0:Object.keys(s.modules).length,t.selectDefaultModule=function(n,e){e.stopPropagation();var o={defaultModule:n};a.mergeToRegistrationData(o).then(function(){t.defaultModule=n,s.defaultModule=n})},t.$watch("autoSyncDownload",function(t){a.mergeToSettingsData({autoSyncDownload:t}),s.settings.autoSyncDownload=t,s.settings.autoSyncDownload||s.settings.autoSyncUpload?u.startBackgroundSync():u.stopBackgroundSync()}),t.$watch("autoSyncUpload",function(t){a.mergeToSettingsData({autoSyncUpload:t}),s.settings.autoSyncUpload=t,s.settings.autoSyncDownload||s.settings.autoSyncUpload?u.startBackgroundSync():u.stopBackgroundSync()})}]).controller("SettingsSelectModulesCtrl",["$scope","$rootScope",function(t,n){n.breadcrumbs=[{name:"Settings"},{name:"Select Modules"}];var e=[],o=[],a=function(){return SyncAPIService.getAllowedSites().then(function(t){e=t})},c=function(){return UserService.getRegistrationData().then(function(t){o=t.modules})},l=function(){};a().then(c).then(l)}]);