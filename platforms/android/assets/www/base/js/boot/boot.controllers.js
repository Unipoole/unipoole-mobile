"use strict";synthMobile.controller("BootCtrl",["$rootScope","$window","$routeParams","DataService","UserService","UserSession","SyncAPIService","SynthErrorHandler","SyncService",function(t,e,n,o,i,r,s,a,u){t.activePage="boot",r.registered=!1;var c=[];t.status=c,t.applicationBoot=!0;var l=n.moduleId;c.push("Initialising..."),null!=l&&(c.push("Loading module : "+l),t.tools=null);var g=function(){return c.push("Checking settings..."),o.ensureSettingsData().then(function(t){r.updateSession({settings:t})})},S=function(){return c.push("Checking sync status..."),s.getSyncStatusOffline(r.activeModule)},d=function(){return c.push("Checking registration progress..."),i.getRegistrationProgress()},h=function(){return c.push("Loading registration..."),o.getRegistrationData().then(function(t){r.updateSession(t),r.activeModule=null!=l?l:t.defaultModule})},p=function(n){return i.PROGRESS_COMPLETED===n?(u.startBackgroundSync(),r.registered=!0,S().then(function(){e.location="#/home",t.applicationBoot=!1})):void(i.PROGRESS_SELECT_MODULES===n?(e.location="#/register-selectModules",t.applicationBoot=!1):(e.location="#/register",t.applicationBoot=!1))};g().then(h).then(d).then(p,a)}]);