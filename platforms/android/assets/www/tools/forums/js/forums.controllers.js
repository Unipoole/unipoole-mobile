"use strict";synthMobile.controller("ForumListCtrl",["$scope","$rootScope","$window","ForumService","SynthErrorHandler",function(o,s,e,r,i){s.activePage="forums",s.breadcrumbs=[{name:"Discussions"}],o.props=e.synth.utilities.getNumberOfProperties,r.getForums().then(function(s){o.forums=s},i)}]).controller("DiscussionListCtrl",["$scope","$rootScope","$window","$routeParams","ForumService","SynthErrorHandler",function(o,s,e,r,i,n){s.activePage="forums",o.props=e.synth.utilities.getNumberOfProperties,i.getForum(r.forumId).then(function(e){s.breadcrumbs=[{name:"Discussions",url:"#/tool/forums"},{name:e.title}],o.forum=e},n)}]).controller("DiscussionCtrl",["$scope","$rootScope","$window","$routeParams","ForumService","SynthErrorHandler",function(o,s,e,r,i,n){s.activePage="forums",o.reply=function(o){e.location=o?e.location+"/"+o+"/reply":e.location+"/reply"},i.getDiscussion(r.forumId,r.discussionId).then(function(e){o.discussion=e,i.getForum(r.forumId).then(function(o){s.breadcrumbs=[{name:"Discussions",url:"#/tool/forums"},{name:o.title,url:"#/tool/forums/"+r.forumId}]},n)},n)}]).controller("ReplyCtrl",["$scope","$rootScope","$window","$routeParams","ForumService","SynthErrorHandler","SyncService",function(o,s,e,r,i,n,t){function u(s){o.topic=s.indexOf("Re:")<0?"Re: "+s:s}s.activePage="forums";var c=void 0!==r.messageId;c?i.getMessage(r.forumId,r.discussionId,r.messageId).then(function(e){o.replyMessage=e,u(e.topic),o.discussion=discussion,s.breadcrumbs=[{name:"Discussions",url:"#/tool/forums"},{name:"Reply"}]},n):i.getDiscussion(r.forumId,r.discussionId).then(function(s){o.replyMessage=s,u(s.topic)},n),o.submit=function(){var s=(o.message,{topic:o.topic,message:o.message,messageId:r.messageId});i.replyOnMessage(r.forumId,r.discussionId,s).then(function(){t.notifyChanges("forums"),e.location="#/tool/forums/"+r.forumId+"/"+r.discussionId},n)}}]);